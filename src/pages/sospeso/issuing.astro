---
import { SospesoIssuingForm } from "@/components/SospesoIssuingForm.tsx";
import Layout from "@/layouts/Layout.astro";
---

<Layout title="소스페소 발행하기">
  <SospesoIssuingForm client:load />
</Layout>

<script>
  import { sospesoIssuingEventBus } from "@/components/SospesoIssuingForm";
  import { navigate } from "@/routing/navigate";
  import { actions } from "astro:actions";

  sospesoIssuingEventBus.on(window.document.body, (command) => {
    actions.issueSospeso(command).then(() => {
      navigate("소스페소-상세", { sospesoId: command.sospesoId });
    });
  });
</script>
